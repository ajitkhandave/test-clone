INSERT INTO `reports_details` ( `report_name`, `created_by`, `created_date`, `modified_by`, `modified_date`) VALUES ('SHIPMENT BY ORDERS ADDRESS REPORT', 'admin', NOW(), 'admin',NOW());

INSERT INTO `reports_query_details` (`report_id`) SELECT report_id from reports_details where report_name = 'SHIPMENT BY ORDERS ADDRESS REPORT';

update `reports_query_details` set `query_detail`='SELECT po.client_order_id ,IFNULL(a.address1,'''') AS address1 ,IFNULL(a.address2,'''') AS address2 ,IFNULL(a.address3,'''') AS address3 ,IFNULL(a.city,'''') AS city ,IFNULL(a.state,'''') AS state ,IFNULL(a.zip_code,'''') AS zip_code ,(SELECT status FROM ${schema}.order_status WHERE id = po.order_status_id) AS order_status FROM ${schema}.platform_order po JOIN ${schema}.line_item li ON po.id = li.order_id JOIN ${schema}.destination d ON li.id = d.line_item_id JOIN ${schema}.address a ON d.address_id = a.id WHERE po.program_id = 3 AND SUBSTRING_INDEX(SUBSTRING_INDEX((SELECT value FROM ${schema}.order_property WHERE order_id = po.id AND name = ''artworkFileLocation''),''/'',6),''/'',-1) != ''RR-DO-11'' GROUP BY po.client_order_id ,IFNULL(a.address1,'''') ,IFNULL(a.address2,'''') ,IFNULL(a.address3,'''') ,IFNULL(a.city,'''') ,IFNULL(a.state,'''') ,IFNULL(a.zip_code,'''')' , `datasource` = '${schema}', `created_date` = NOW(), `modified_date` = NOW()
where report_id = (SELECT report_id from reports_details where report_name = 'SHIPMENT BY ORDERS ADDRESS REPORT')
